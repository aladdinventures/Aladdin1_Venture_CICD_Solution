# ุณุณุชู ุงุชููุงุณูู ูุชูุจ ูุณุฎู 3.0 - ุฑุงูููุง ุงุณุชูุฑุงุฑ

**ุญู ฺุงูพ ยฉ 2025 ุณุนุฏ ุนูุงุฏู. ุชูุงู ุญููู ูุญููุธ ุงุณุช.**

ุงู ุฑุงูููุง ุฏุณุชูุฑุงูุนููโูุง ุฌุงูุน ุฑุง ุจุฑุง ุงุณุชูุฑุงุฑ ุณุณุชู ุงุชููุงุณูู ูุชูุจ ูุณุฎู 3.0 ุจุฑ ุฑู ุณุฑูุฑ ุงุฑุงุฆู ูโุฏูุฏุ ฺฉู ุนูุฏุชุงู ุจุฑ ุฑู ุฑุงูโุงูุฏุงุฒ ูุจุชู ุจุฑ Docker ุชูุฑฺฉุฒ ุฏุงุฑุฏ. ุงู ูุณุฎู ุดุงูู ฺฉ ุฒุฑุณุงุฎุช ุงุตู ููุ ููุงุท ูพุงุงู API ู ูพุงุฏูโุณุงุฒโูุง ุงุณุชุงุจ (Stub) ุจุฑุง ุชููุฏ ูุญุชูุงุ ุณุงุฎุช ูุฏู ู ุขูพููุฏ ุงุณุช ฺฉู ุงูฺฉุงู ุชุณุช ุณุฑุชุงุณุฑ ุฑุง ุฏุฑ ฺฉ ูุญุท ุดุจูโุณุงุฒ ุดุฏู ูุฑุงูู ูโฺฉูุฏ.

## ๐ฏ ููุง ฺฉู ูพุฑูฺู

ุณุณุชู ุงุชููุงุณูู ูุชูุจ ูุณุฎู 3.0 ุจู ุนููุงู ฺฉ ูพูุชูุฑู ูุงฺููุงุฑ ู ููุงุณโูพุฐุฑ ุจุฑุง ุชููุฏ ู ุงูุชุดุงุฑ ุฎูุฏฺฉุงุฑ ูุญุชูุง ูุชูุจ ุทุฑุงุญ ุดุฏู ุงุณุช. ุงู ุณุณุชู ุงุฒ FastAPI ุจุฑุง APIุ SQLAlchemy ุจุฑุง ORMุ PostgreSQL ุจุฑุง ูพุงฺฏุงู ุฏุงุฏูุ Redis ุจุฑุง ฺฉุดูฺฏ ู ุตูโุจูุฏ ูุธุงูุ ู Celery ุจุฑุง ูพุฑุฏุงุฒุด ูุธุงู ูุงููุฒูุงู ุงุณุชูุงุฏู ูโฺฉูุฏ. ฺฉู ุณุณุชู ุจุง ุงุณุชูุงุฏู ุงุฒ Docker ฺฉุงูุชูุฑ ุดุฏู ู ุจุง Docker Compose ุงุฑฺฉุณุชุฑุงุณูู ูโุดูุฏ.

## ๐ ุดุฑูุน ุณุฑุน (Docker Compose)

ุงู ุฑูุด ุชูุตู ุดุฏู ุจุฑุง ุงุณุชูุฑุงุฑ ุงุณุช ฺฉู ฺฉ ูุญุท ุงุฒููู ู ุจู ุฑุงุญุช ูุงุจู ูุฏุฑุช ุฑุง ูุฑุงูู ูโฺฉูุฏ.

### ูพุดโูุงุฒูุง

ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุณุฑูุฑ ุดูุง ููุงุฑุฏ ุฒุฑ ุฑุง ูุตุจ ฺฉุฑุฏู ุงุณุช:

-   **Docker:** [ุฑุงูููุง ูุตุจ](https://docs.docker.com/engine/install/)
-   **Docker Compose:** [ุฑุงูููุง ูุตุจ](https://docs.docker.com/compose/install/)

### ูุฑุงุญู ูุตุจ

1.  **ุงูุชูุงู ูพุฑูฺู:**
    ุจุณุชู `youtube_automation_v3.zip` ุฑุง ุจู ุณุฑูุฑ ุฎูุฏ ุขูพููุฏ ฺฉูุฏ. ูโุชูุงูุฏ ุงุฒ `scp`ุ `rsync` ุง ูุฑ ุฑูุด ุงูู ุงูุชูุงู ูุงู ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ.

    ```bash
    # ูุซุงู ุจุง ุงุณุชูุงุฏู ุงุฒ scp (ุจุง ุฌุฒุฆุงุช ุณุฑูุฑ ู ูุณุฑ ูุญู ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ)
    scp /path/to/local/youtube_automation_v3.zip ubuntu@your_server_ip:~/
    ```

2.  **ุงุณุชุฎุฑุงุฌ ูพุฑูฺู:**
    ุงุฒ ุทุฑู SSH ุจู ุณุฑูุฑ ุฎูุฏ ูุชุตู ุดูุฏ ู ุขุฑุดู ูพุฑูฺู ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูุฏ.

    ```bash
    ssh ubuntu@your_server_ip
    unzip ~/youtube_automation_v3.zip -d /home/ubuntu/
    cd /home/ubuntu/youtube_automation_v3
    ```

3.  **ูพฺฉุฑุจูุฏ ูุชุบุฑูุง ูุญุท:**
    ูพุฑูฺู ุงุฒ ูุชุบุฑูุง ูุญุท ุจุฑุง ูพฺฉุฑุจูุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ. ฺฉ ูุงู ุงูฺฏู `.env.example` ุงุฑุงุฆู ุดุฏู ุงุณุช.

    ```bash
    cp .env.example .env
    ```

    **ูุงู `.env` ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ูุฑุงุดฺฏุฑ ูุชู ูุงููุฏ `nano` ุง `vim` ูุฑุงุด ฺฉูุฏ:**

    ```bash
    nano .env
    ```

    **ูุชุบุฑูุง ฺฉูุฏ ุจุฑุง ูพฺฉุฑุจูุฏ:**

    -   `JWT_SECRET_KEY`: ฺฉ ุฑุดุชู ูู ู ุชุตุงุฏู ุจุฑุง ุงูุถุง ุชูฺฉูโูุง JWT. ูโุชูุงูุฏ ุจุง `openssl rand -hex 32` ฺฉ ุชููุฏ ฺฉูุฏ.
    -   `SECRET_KEY`: ฺฉ ุฑุดุชู ูู ู ุชุตุงุฏู ุฏฺฏุฑ ุจุฑุง ุงููุช ุนููู ุจุฑูุงูู.
    -   `POSTGRES_PASSWORD`: ฺฉ ุฑูุฒ ุนุจูุฑ ูู ุจุฑุง ฺฉุงุฑุจุฑ PostgreSQL ุชูุธู ฺฉูุฏ.
    -   `REDIS_PASSWORD`: ฺฉ ุฑูุฒ ุนุจูุฑ ูู ุจุฑุง Redis ุชูุธู ฺฉูุฏ.
    -   `AI_PROVIDER`: ุงุฑุงุฆูโุฏููุฏู AI ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ (`ollama`ุ `openai`ุ `deepseek`). `ollama` ุจุฑุง ุชูุณุนู ูุญู ุฑุงฺฏุงู ุชูุตู ูโุดูุฏ.
        -   ุงฺฏุฑ `ollama`ุ `OLLAMA_BASE_URL` ู `OLLAMA_MODEL` ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ.
        -   ุงฺฏุฑ `openai` ุง `deepseek`ุ `OPENAI_API_KEY` ุง `DEEPSEEK_API_KEY` ุฑุง ุงุฑุงุฆู ุฏูุฏ.
    -   `LOG_LEVEL`: ุจุฑุง ุชููุฏ `INFO` ู ุจุฑุง ุชูุณุนู `DEBUG` ุฑุง ุชูุธู ฺฉูุฏ.
    -   `CORS_ORIGINS`: ุจุฑุง ุฏุงููู ุจุฑูุงูู ูุฑุงูุชโุงูุฏ ุฎูุฏ ุชูุธู ฺฉูุฏ (ูุซูุงู `http://localhost:3000,https://your-frontend.com`). ุงุณุชูุงุฏู ุงุฒ `*` ููุท ุจุฑุง ุชูุณุนู ุงุณุช.

4.  **ุณุงุฎุช ู ุฑุงูโุงูุฏุงุฒ ุณุฑูุณโูุง:**
    ุจู ุฏุงุฑฺฉุชูุฑ ุฑุดู ูพุฑูฺู (`/home/ubuntu/youtube_automation_v3`) ุจุฑูุฏ ู ุงุฒ Docker Compose ุจุฑุง ุณุงุฎุช ุงูุฌโูุง ู ุฑุงูโุงูุฏุงุฒ ููู ุณุฑูุณโูุง ุงุณุชูุงุฏู ฺฉูุฏ.

    ```bash
    docker compose build
    docker compose up -d
    ```

    -   `docker compose build`: ุงูุฌโูุง Docker ุฑุง ุจุฑุง ููู ุณุฑูุณโูุง ุชุนุฑู ุดุฏู ุฏุฑ `docker-compose.yml` ูโุณุงุฒุฏ.
    -   `docker compose up -d`: ุณุฑูุณโูุง ุฑุง ุฏุฑ ุญุงูุช ุฌุฏุง ุดุฏู (detached mode) ุฑุงูโุงูุฏุงุฒ ูโฺฉูุฏ (ุฏุฑ ูพุณโุฒููู ุงุฌุฑุง ูโุดููุฏ).

5.  **ุจุฑุฑุณ ูุถุนุช ุณุฑูุณ:**
    ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ููู ฺฉุงูุชูุฑูุง ุจู ุฏุฑุณุช ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชูุฏ.

    ```bash
    docker compose ps
    ```

    ุจุงุฏ ูุถุนุช `Up` ุฑุง ุจุฑุง `web`ุ `db`ุ `redis`ุ `celery_worker` ู `celery_beat` ูุดุงูุฏู ฺฉูุฏ.

6.  **ุฏุณุชุฑุณ ุจู API:**
    ุจุฑูุงูู FastAPI ุฏุฑ ูพูุฑุช `8000` ุณุฑูุฑ ุดูุง ูุงุจู ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.

    -   **ุจุฑุฑุณ ุณูุงูุช (Health Check):** `http://your_server_ip:8000/health`
    -   **ูุณุชูุฏุงุช API (Swagger UI):** `http://your_server_ip:8000/docs`
    -   **ูุณุชูุฏุงุช API (ReDoc):** `http://your_server_ip:8000/redoc`

## ๐ง ุฌุฒุฆุงุช ูพฺฉุฑุจูุฏ

ุจุฑุง ูุณุช ฺฉุงูู ูุชุบุฑูุง ูุญุท ูุงุจู ูพฺฉุฑุจูุฏ ู ุชูุถุญุงุช ุขููุง ุจู ูุงู `.env.example` ูุฑุงุฌุนู ฺฉูุฏ.

## ๐ ููุงุฌุฑุชโูุง ูพุงฺฏุงู ุฏุงุฏู (Alembic)

ุงู ูพุฑูฺู ุงุฒ Alembic ุจุฑุง ููุงุฌุฑุชโูุง ูพุงฺฏุงู ุฏุงุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ. ูพุณ ุงุฒ ุฑุงูโุงูุฏุงุฒ ุงูููุ ุฏุฑ ุตูุฑุช ูุฌูุฏ ุชุบุฑุงุช ุฏุฑ ุดูุง ูพุงฺฏุงู ุฏุงุฏูุ ุจุงุฏ ููุงุฌุฑุชโูุง ุฑุง ุงุฌุฑุง ฺฉูุฏ.

1.  **ุฏุณุชุฑุณ ุจู ุดู ุณุฑูุณ `web`:**
    ```bash
    docker compose exec web bash
    ```

2.  **ุงุฌุฑุง ููุงุฌุฑุชโูุง:**
    ```bash
    alembic upgrade head
    ```

    *ุชูุฌู: ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุงูููุ `Base.metadata.create_all(bind=engine)` ุฏุฑ `main.py` ุงุฌุงุฏ ุฌุฏุงูู ุฑุง ูุฏุฑุช ูโฺฉูุฏ. Alembic ุจุฑุง ุชุบุฑุงุช ุดูุง ุจุนุฏ ุงุณุช.* 

## ๐ ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ

-   **ฺฉุงูุชูุฑ ุฑุงูโุงูุฏุงุฒ ููโุดูุฏ:** ูุงฺฏโูุง ุณุฑูุณ ูุฑุจูุทู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
    ```bash
    docker compose logs <service_name>
    # ูุซุงู: docker compose logs web
    ```

-   **ุฏุณุชูุฑ `docker compose` ุงูุช ูุดุฏ:** ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู Docker Compose ุจู ุฏุฑุณุช ูุตุจ ุดุฏู ู ุฏุฑ PATH ุดูุง ูุฑุงุฑ ุฏุงุฑุฏ.

-   **`no configuration file provided`:** ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุฏุฑ ุฏุงุฑฺฉุชูุฑ `youtube_automation_v3` ูุณุชุฏ ุง ุงุฒ ูพุฑฺู `-f` ุงุณุชูุงุฏู ฺฉูุฏ (ูุซูุงู `docker compose -f docker-compose.yml up -d`).

-   **ุฎุทุงูุง ุงุชุตุงู ุจู ูพุงฺฏุงู ุฏุงุฏู:** `POSTGRES_USER`ุ `POSTGRES_PASSWORD`ุ `POSTGRES_DB` ุฑุง ุฏุฑ ูุงู `.env` ุฎูุฏ ุจุฑุฑุณ ฺฉูุฏ ู ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุณุฑูุณ `db` ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช.

-   **Celery worker/beat ุจู Redis ูุชุตู ููโุดูุฏ:** `REDIS_PASSWORD` ุฑุง ุจุฑุฑุณ ฺฉูุฏ ู ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุณุฑูุณ `redis` ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช.

### ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณโูุง

```bash
# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ฺฉ ุณุฑูุณ ุฎุงุต
docker compose restart <service_name>

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ููู ุณุฑูุณโูุง
docker compose restart

# ุชููู ููู ุณุฑูุณโูุง
docker compose stop

# ุชููู ู ุญุฐู ููู ฺฉุงูุชูุฑูุงุ ุดุจฺฉูโูุง ู ููููโูุง
docker compose down
```

## ๐ ูุฑุงุญู ุจุนุฏ

ูพุณ ุงุฒ ุงุณุชูุฑุงุฑุ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุชุณุช ุงุฑุงุฆู ุดุฏู ุง ูุณุชููุงู ุงุฒ ุทุฑู Swagger UI (`/docs`)ุ ููุงุท ูพุงุงู API ุฑุง ุชุณุช ฺฉูุฏ.

---
